<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Energy Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
<div class="container">
    <h1 class="glow-text">âš¡ AI Energy Forecasting Dashboard</h1>

    <!-- ================= MANUAL PREDICTION ================= -->
    <div class="card glow-hover" style="margin-bottom: 25px;">
        <h2>ðŸ”® Manual Prediction Input</h2>
        <p>Enter your last 5 power readings (kW) separated by commas:</p>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="manualInput" class="input-style"
                   placeholder="e.g., 1.2, 0.9, 1.5, 1.1, 1.3">
            <button onclick="predictManual()" class="btn-glow"
                    style="width: 200px; margin: 15px 0;">
                Get Prediction
            </button>
        </div>
        <p id="manualResult" class="neon-blue" style="margin-top: 10px;"></p>
    </div>

    <!-- ================= CONTROLS ================= -->
    <div class="controls card glow-hover">
        <div class="selection-grid">
            <div>
                <h3>Choose Device:</h3>
                <select id="deviceSelect" class="input-style" onchange="refresh('H')">
                    <option value="Overall">Overall House</option>
                    <option value="AC">Air Conditioning</option>
                    <option value="Kitchen">Kitchen Appliances</option>
                    <option value="Lights">Home Lighting</option>
                </select>
            </div>
            <div>
                <h3>Select Analysis Timeframe:</h3>
                <div class="btn-group">
                    <button onclick="refresh('H')">Hourly</button>
                    <button onclick="refresh('D')">Daily</button>
                    <button onclick="refresh('M')">Monthly</button>
                    <button onclick="refresh('A')">Annual</button>
                </div>
            </div>
        </div>

        <p style="margin-top: 15px;">
            Forecasted Usage:
            <span id="predVal" class="neon-blue">0</span>
        </p>
    </div>

    <!-- ================= DASHBOARD GRID ================= -->
    <div class="grid" style="margin-top: 25px;">

        <!-- ENERGY TREND -->
        <div class="card glow-hover">
            <h2>ðŸ“ˆ Energy Trend</h2>
            <img id="lineGraph">
        </div>

        <!-- CONSUMPTION BREAKDOWN -->
        <div class="card glow-hover">
            <h2>ðŸ¥§ Consumption Breakdown</h2>
            <img id="pieGraph">
        </div>

        <!-- ================= DEVICE CONTROL (LEFT) ================= -->
        <div class="card glow-hover device-control">
            <h2>ðŸ•¹ Device Control Panel</h2>
            <p class="neon-blue" style="font-size:0.9rem;">
                Control devices room-wise
            </p>
            <div id="deviceControls"></div>
        </div>

        <!-- ================= TOP DEVICES (RIGHT) ================= -->
        <div class="card glow-hover">
            <h2>ðŸ”¥ Top Power Consuming Devices</h2>
            <img id="topDeviceGraph">
        </div>

        <!-- SMART SUGGESTIONS -->
        <div class="card glow-hover full-width">
            <h2>ðŸ’¡ Smart Energy Suggestions</h2>
            <ul id="suggestionsList" class="neon-list"></ul>
        </div>

    </div>
</div>

<!-- ================= CHATBOT ================= -->
<div id="chat-container">
    <div id="chat-box" class="glow-hover">
        <div id="chat-header">Assistant</div>
        <div id="chat-messages"></div>
        <div class="chat-footer">
            <input type="text" id="chatInput"
                   placeholder="Ask a question or control devices...">
            <button onclick="sendChat()">Send</button>
        </div>
    </div>
    <button id="chat-toggle" onclick="toggleChat()">ðŸ’¬</button>
</div>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
